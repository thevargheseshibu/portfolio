<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Varghese Shibu | Architect of Digital Realities</title>

    <!-- Tailwind CSS (Essential for rapid, responsive layout) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FONTS: The Definitive Selection for an Ethereal, High-Tech Feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sora:wght@700&family=Inter:wght@400;500&display=swap"
      rel="stylesheet"
    />

    <!-- CSS: The Final Overhaul -->
    <style>
      :root {
        /* Art Direction: "Ghost in the Machine" */
        --color-background: #010204;
        --color-primary: #e2e8f0;
        --color-secondary: #64748b;
        --color-accent: #00f6ff; /* Ethereal Cyan */
        --color-glow: rgba(0, 246, 255, 0.1);
        --cursor-x: 50vw;
        --cursor-y: 50vh;
      }

      /* --- Base & Typography --- */
      html {
        cursor: none;
      }
      body {
        background-color: var(--color-background);
        color: var(--color-primary);
        font-family: "Inter", sans-serif;
        overflow-x: hidden;
      }
      .font-display {
        font-family: "Sora", sans-serif;
        letter-spacing: -0.03em;
      }

      /* --- FINAL CURSOR: The "Digital Wisp" --- */
      #cursor-wisp {
        position: fixed;
        top: 0;
        left: 0;
        width: 20px;
        height: 20px;
        background: var(--color-accent);
        border-radius: 50%;
        pointer-events: none;
        z-index: 9999;
        transform: translate(-50%, -50%);
        opacity: 0;
        filter: blur(10px);
        transition: opacity 0.3s, transform 0.1s;
      }
      body:hover #cursor-wisp {
        opacity: 1;
      }
      [data-magnetic]:hover ~ #cursor-wisp {
        transform: translate(-50%, -50%) scale(3);
        filter: blur(15px);
      }

      /* --- Dynamic Background Effects --- */
      #spotlight {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        background: radial-gradient(
          circle 600px at var(--cursor-x) var(--cursor-y),
          rgba(0, 246, 255, 0.05),
          transparent 80%
        );
      }

      /* --- Animations & UI Elements --- */
      .reveal {
        opacity: 0;
        transform: translateY(60px);
        transition: opacity 1.5s cubic-bezier(0.16, 1, 0.3, 1),
          transform 1.5s cubic-bezier(0.16, 1, 0.3, 1);
        transition-delay: var(--delay, 0s);
      }
      .reveal.is-visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* nav.scrolled {
        background: rgba(1, 2, 4, 0.7);
        backdrop-filter: blur(16px);
        border-bottom: 1px solid rgba(0, 246, 255, 0.1);
      } */

      .glass-card {
        background: linear-gradient(
          145deg,
          rgba(13, 17, 23, 0.3),
          rgba(1, 2, 4, 0.5)
        );
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1),
          box-shadow 0.5s cubic-bezier(0.16, 1, 0.3, 1), border-color 0.5s ease;
        perspective: 1000px;
        transform-style: preserve-3d;
      }

      .glass-card:hover {
        transform: rotateY(6deg) rotateX(6deg) translateY(-16px);
        border-color: var(--color-accent);
        box-shadow: 0 60px 80px rgba(0, 0, 0, 0.3), 0 0 50px var(--color-accent),
          0 0 20px rgba(0, 246, 255, 0.2) inset;
      }

      /* --- Hero Text Decode Effect --- */
      .decode-text-wrapper {
        text-shadow: 0 0 15px var(--color-glow);
      }
      .decode-text span {
        opacity: 0;
        color: var(--color-accent);
        animation: decode-char 1s forwards;
        animation-delay: var(--char-delay);
      }
      @keyframes decode-char {
        0% {
          opacity: 0;
        }
        50% {
          opacity: 0.8;
        }
        100% {
          opacity: 1;
          color: var(--color-primary);
        }
      }

      /* --- FINAL TIMELINE --- */
      .timeline {
        position: relative;
        max-width: 1000px;
        margin: 0 auto;
        padding: 2rem 0;
      }
      .timeline::before {
        content: "";
        position: absolute;
        top: 0;
        left: 50%;
        width: 2px;
        height: 100%;
        background: #1e293b;
        transform: translateX(-50%);
      }
      .timeline-line-progress {
        position: absolute;
        top: 0;
        left: 50%;
        width: 2px;
        height: 0;
        background: var(--color-accent);
        transform: translateX(-50%);
        transition: height 0.3s ease-out;
        box-shadow: 0 0 10px var(--color-accent), 0 0 20px var(--color-accent);
      }
      .timeline-item {
        position: relative;
        width: 50%;
        padding: 10px 40px;
      }
      .timeline-item:nth-child(odd) {
        left: 0;
      }
      .timeline-item:nth-child(even) {
        left: 50%;
      }
      .timeline-item::after {
        content: "";
        position: absolute;
        top: 25px;
        width: 25px;
        height: 25px;
        background: var(--color-background);
        border: 4px solid #1e293b;
        border-radius: 50%;
        z-index: 1;
        transition: all 0.5s ease;
      }
      .timeline-item:nth-child(odd)::after {
        right: -12.5px;
      }
      .timeline-item:nth-child(even)::after {
        left: -12.5px;
      }
      .timeline-item.is-visible::after {
        border-color: var(--color-accent);
        background: var(--color-accent);
        box-shadow: 0 0 20px var(--color-accent);
      }
      .aurora {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        background: radial-gradient(
            ellipse at center,
            rgba(255, 215, 0, 0.03),
            transparent 70%
          ),
          radial-gradient(
            ellipse at top right,
            rgba(255, 215, 0, 0.05),
            transparent 70%
          ),
          linear-gradient(120deg, rgba(255, 215, 0, 0.03), transparent);
        animation: auroraMove 30s ease infinite;
      }
      @keyframes auroraMove {
        0% {
          background-position: 0% 0%;
        }
        50% {
          background-position: 50% 100%;
        }
        100% {
          background-position: 0% 0%;
        }
      }

      .parallax-item {
        will-change: transform;
        transition: transform 0.1s ease-out;
        transform-style: preserve-3d;
      }

      .lens-flare::after {
        content: "";
        position: absolute;
        width: 60px;
        height: 60px;
        background: radial-gradient(circle, #00f6ff44, transparent);
        border-radius: 50%;
        filter: blur(10px);
        animation: flicker 1s infinite;
      }
      @keyframes flicker {
        0%,
        100% {
          opacity: 0.6;
        }
        50% {
          opacity: 1;
          transform: scale(1.1);
        }
      }

      .timeline-item .timeline-content {
        background: rgba(1, 2, 4, 0.8);
        border: 1px solid rgba(0, 246, 255, 0.2);
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 0 30px rgba(0, 246, 255, 0.1);
        transition: transform 0.5s ease, box-shadow 0.5s ease;
        transform: translateZ(0);
      }
      .timeline-item:hover .timeline-content {
        transform: scale(1.03);
        box-shadow: 0 0 40px rgba(0, 246, 255, 0.4);
      }

      .timeline-line-progress {
        animation: glowLine 3s ease-in-out infinite alternate;
      }
      @keyframes glowLine {
        from {
          box-shadow: 0 0 5px var(--color-accent);
        }
        to {
          box-shadow: 0 0 25px var(--color-accent);
        }
      }

      .timeline-content {
        background: rgba(255, 255, 255, 0.03);
        padding: 1rem 1.5rem;
        border-radius: 1rem;
        backdrop-filter: blur(5px);
      }

      @media (max-width: 768px) {
        .timeline::before,
        .timeline-line-progress {
          left: 20px;
        }

        .timeline-item {
          width: 100%;
          padding-left: 70px;
          padding-right: 20px;
          left: 0 !important;
          margin-bottom: 2rem;
        }

        .timeline-item::after {
          left: 20px;
        }

        .timeline-content {
          text-align: left;
        }
      }

      @media (max-width: 768px) {
        main {
          padding-top: 4.5rem; /* or whatever your navbar height is */
        }
      }

      @media (max-width: 768px) {
        .navbar {
          background-color: rgba(255, 255, 255, 0.3); /* light glass */
        }
      }

      /* Dark background on desktop */
      @media (min-width: 769px) {
        .navbar {
          background-color: rgba(0, 0, 0, 0.6); /* dark glass */
        }
      }
    </style>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              background: "var(--color-background)",
              primary: "var(--color-primary)",
              secondary: "var(--color-secondary)",
              accent: "var(--color-accent)",
            },
            fontFamily: {
              sans: ["Inter", "sans-serif"],
              display: ["Sora", "sans-serif"],
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-background text-primary">
    <div id="spotlight"></div>
    <div
      id="cursor-wisp"
      class="hidden lg:block fixed w-6 h-6 rounded-full bg-white/20 pointer-events-none z-50"
    ></div>

    <canvas
      id="particle-canvas"
      class="fixed top-0 left-0 w-full h-full -z-10"
    ></canvas>

    <div class="aurora"></div>

    <header>
      <nav
        id="navbar"
        class="fixed top-0 left-0 right-0 z-50 flex items-center justify-between px-6 py-4 bg-transparent md:bg-black/60 md:backdrop-blur-md md:shadow-lg"
      >
        <!-- Logo or Name -->
        <div class="text-xl font-bold text-white">VS</div>

        <!-- Hamburger (visible only on mobile) -->
        <button id="menu-toggle" class="md:hidden text-white text-3xl">
          &#9776;
          <!-- Unicode hamburger â˜° -->
        </button>

        <!-- Desktop Nav Links (hidden on mobile) -->
        <div class="hidden md:flex space-x-6 text-white">
          <a href="#about" class="hover:text-accent">About</a>
          <a href="#skills" class="hover:text-accent">Skills</a>
          <a href="#projects" class="hover:text-accent">Projects</a>
          <a href="#experience" class="hover:text-accent">Experience</a>
          <a href="#contact" class="hover:text-accent">Contact</a>
        </div>
      </nav>
    </header>

    <div
      id="mobile-menu"
      class="fixed top-0 right-0 h-full w-64 bg-[#0a0a0a] text-white transform translate-x-full transition-transform duration-300 z-50 md:hidden"
    >
      <div
        class="flex justify-between items-center px-4 py-4 border-b border-white/10"
      >
        <div class="text-xl font-bold">Menu</div>
        <button id="menu-close" class="text-3xl font-bold">
          &times;
          <!-- âœ• icon -->
        </button>
      </div>
      <div class="flex flex-col space-y-4 px-6 py-6 text-lg">
        <a href="#about" class="hover:text-accent">About</a>
        <a href="#skills" class="hover:text-accent">Skills</a>
        <a href="#projects" class="hover:text-accent">Projects</a>
        <a href="#experience" class="hover:text-accent">Experience</a>
        <a href="#contact" class="hover:text-accent">Contact</a>
      </div>
    </div>

    <main class="pt-12">
      <section
        id="hero"
        class="h-screen w-full flex flex-col justify-center items-center text-center"
      >
        <h1
          class="text-7xl md:text-9xl font-extrabold font-display decode-text-wrapper"
        >
          <span class="decode-text"></span>
        </h1>
        <p
          class="text-xl md:text-2xl text-secondary max-w-3xl mt-6 reveal"
          style="--delay: 1.5s"
        >
          Lead Solution Engineer & Architect of Digital Realities
        </p>
      </section>

      <section id="about" class="py-40">
        <div class="max-w-4xl mx-auto px-4">
          <p
            class="reveal text-3xl md:text-5xl leading-tight text-center font-medium"
          >
            I architect and build
            <span class="text-accent">high-impact digital realities</span>,
            transmuting complex problems into elegant and scalable software.
          </p>
        </div>
      </section>

      <section id="skills" class="py-24 parallax-item" data-depth="0.4">
        <div class="max-w-6xl mx-auto px-4">
          <div class="text-center">
            <h2 class="reveal text-6xl md:text-7xl font-bold font-display">
              Alchemist's Toolkit
            </h2>
          </div>
          <div
            id="skills-grid"
            class="mt-20 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8"
          ></div>
        </div>
      </section>
      <section id="projects" class="py-24 parallax-item" data-depth="0.4">
        <div class="max-w-7xl mx-auto px-4">
          <div class="text-center parallax-item">
            <h2 class="reveal text-6xl md:text-7xl font-bold font-display">
              Selected Works
            </h2>
          </div>
          <div
            id="projects-grid"
            class="mt-20 grid grid-cols-1 md:grid-cols-2 gap-8"
          ></div>
        </div>
      </section>

      <section id="experience" class="py-24 parallax-item" data-depth="0.4">
        <div class="max-w-4xl mx-auto px-4">
          <div class="text-center">
            <h2 class="reveal text-6xl md:text-7xl font-bold font-display">
              Career Blueprint
            </h2>
          </div>
          <div class="timeline mt-20">
            <div class="timeline-line-progress"></div>
            <div id="experience-timeline"></div>
          </div>
        </div>
      </section>

      <section
        id="contact"
        class="py-40 text-center parallax-item"
        data-depth="0.4"
      >
        <div class="max-w-3xl mx-auto px-4">
          <h2 class="reveal text-6xl md:text-8xl font-bold font-display">
            Let's Create Together
          </h2>
          <div class="reveal mt-12" style="--delay: 0.2s">
            <a
              href="mailto:thevargheseshibu@gmail.com"
              class="text-2xl inline-block px-12 py-5 bg-accent text-background font-bold rounded-full hover:scale-105 transition-all"
              data-magnetic
              >Get In Touch</a
            >
          </div>
        </div>
      </section>

      <section id="contact" class="py-40 text-center">
        <div class="max-w-3xl mx-auto px-4">
          <h2 class="reveal text-6xl md:text-8xl font-bold font-display">
            Let's Create Together
          </h2>

          <!-- âœ¨ Contact Form -->
          <form
            id="contact-form"
            class="glass-card mt-12 p-10 space-y-6 text-left reveal"
          >
            <div>
              <label class="block text-secondary mb-2">Your Name</label>
              <input
                type="text"
                name="name"
                required
                class="w-full p-3 rounded bg-background text-primary border border-accent/10 focus:outline-none focus:ring-2 focus:ring-accent"
              />
            </div>
            <div>
              <label class="block text-secondary mb-2">Email</label>
              <input
                type="email"
                name="email"
                required
                class="w-full p-3 rounded bg-background text-primary border border-accent/10 focus:outline-none focus:ring-2 focus:ring-accent"
              />
            </div>
            <div>
              <label class="block text-secondary mb-2">Message</label>
              <textarea
                name="message"
                rows="5"
                required
                class="w-full p-3 rounded bg-background text-primary border border-accent/10 focus:outline-none focus:ring-2 focus:ring-accent"
              ></textarea>
            </div>
            <div class="text-right">
              <button
                type="submit"
                class="px-6 py-3 bg-accent text-background font-bold rounded-full hover:scale-105 transition-all"
              >
                Transmit
              </button>
            </div>
          </form>
        </div>
      </section>
    </main>

    <footer class="py-12 px-4">
      <div
        class="max-w-7xl mx-auto flex justify-between items-center text-secondary"
      >
        <p>&copy; 2025 Varghese Shibu</p>
        <div class="flex space-x-6">
          <a
            href="https://github.com/thevargheseshibu"
            target="_blank"
            class="hover:text-primary"
            data-magnetic
            >GitHub</a
          ><a
            href="https://linkedin.com/in/thevargheseshibu"
            target="_blank"
            class="hover:text-primary"
            data-magnetic
            >LinkedIn</a
          >
        </div>
      </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const DATA = {
          name: "Varghese Shibu",
          skills: [
            "React",
            "Next.js",
            "Node.js",
            "MongoDB",
            "Blockchain",
            "Unity",
            "TypeScript",
            "Python",
            "AWS",
            "Docker",
            "Solidity",
            "TailwindCSS",
          ],

          projects: [
            {
              title: "Payment SDK Platform",
              client: "Lyca Productions",
              description:
                "Architected a cross-platform SDK for in-app purchases, streamlining transactions.",
              tech: ["React Native", "Node.js", "Stripe"],
              imgSrc:
                "https://placehold.co/600x400/010204/00f6ff?text=Lyca+SDK",
            },
            {
              title: "Global Travel Portal",
              client: "Korean Air",
              description:
                "Led the front-end revamp of a high-traffic booking engine, improving performance and UX.",
              tech: ["Next.js", "GraphQL", "MongoDB"],
              imgSrc:
                "https://placehold.co/600x400/010204/00f6ff?text=Korean+Air",
            },
            {
              title: "Decentralized Donation App",
              client: "Kerala Blockchain Academy",
              description:
                "Developed a transparent organ donation tracking system using blockchain technology.",
              tech: ["Solidity", "React", "Ethers.js"],
              imgSrc: "https://placehold.co/600x400/010204/00f6ff?text=dApp",
            },
            {
              title: "Dynamic Content Editor",
              client: "Panasonic",
              description:
                "Built a dynamic, component-based content management tool for internal platforms.",
              tech: ["React", "TypeScript", "Node.js"],
              imgSrc:
                "https://placehold.co/600x400/010204/00f6ff?text=Panasonic+CMS",
            },
          ],
          experience: [
            {
              role: "Lead Solution Engineer",
              company: "Lyca Productions",
              period: "2021 - Present",
              description:
                "Leading the design and implementation of core digital platforms and payment systems.",
            },
            {
              role: "Senior Full-Stack Developer",
              company: "Korean Air (via IBS)",
              period: "2019 - 2021",
              description:
                "Key developer on the team modernizing the global travel and booking web portal.",
            },
            {
              role: "Software Engineer",
              company: "Panasonic",
              period: "2018 - 2019",
              description:
                "Developed internal tools and dynamic content editors for enterprise-level applications.",
            },
          ],
        };

        // Store the original transform of all parallax elements
        document.querySelectorAll("[data-depth]").forEach((el) => {
          el.dataset.originalTransform =
            getComputedStyle(el).transform !== "none"
              ? getComputedStyle(el).transform
              : "";
        });

        // --- DECODE TEXT ANIMATION ---
        const textElement = document.querySelector(".decode-text");
        const originalText = DATA.name;
        const chars = "!<>-_\\/[]{}â€”=+*^?#________";

        function decodeEffect() {
          let iteration = 0;
          const interval = setInterval(() => {
            textElement.innerHTML = originalText
              .split("")
              .map((letter, index) => {
                if (index < iteration)
                  return `<span>${originalText[index]}</span>`;
                return `<span style="--char-delay: ${Math.random() * 500}ms">${
                  chars[Math.floor(Math.random() * chars.length)]
                }</span>`;
              })
              .join("");

            if (iteration >= originalText.length) {
              clearInterval(interval);
              textElement.innerHTML = originalText
                .split("")
                .map((char) => `<span>${char}</span>`)
                .join("");
            }

            iteration += 1 / 2;
          }, 50);
        }
        setTimeout(decodeEffect, 500);

        // --- DYNAMIC CONTENT INJECTION ---
        const skillsGrid = document.getElementById("skills-grid");
        DATA.skills.forEach((skill, i) => {
          const el = document.createElement("div");
          el.className = "reveal glass-card p-6 text-center";
          el.style.setProperty("--delay", `${i * 50}ms`);
          el.innerHTML = `<p class="font-medium text-lg">${skill}</p>`;
          skillsGrid.appendChild(el);
        });

        const projectsGrid = document.getElementById("projects-grid");
        DATA.projects.forEach((project, i) => {
          const el = document.createElement("div");
          el.className = "reveal glass-card flex flex-col overflow-hidden";
          el.style.setProperty("--delay", `${i * 100}ms`);
          let techHtml = project.tech
            .map(
              (tag) =>
                `<span class="bg-white/5 text-accent text-xs font-mono px-3 py-1 rounded-full">${tag}</span>`
            )
            .join("");
          el.innerHTML = `<div class="h-64 bg-gray-900 overflow-hidden"><img src="${project.imgSrc}" alt="${project.title}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" /></div><div class="p-8 flex flex-col flex-grow"><h3 class="text-3xl font-bold font-display">${project.title}</h3><p class="text-secondary font-semibold mt-2">${project.client}</p><p class="text-secondary my-4 flex-grow">${project.description}</p><div class="flex flex-wrap gap-2 mt-auto">${techHtml}</div></div>`;
          projectsGrid.appendChild(el);
        });
        const experienceTimeline = document.getElementById(
          "experience-timeline"
        );

        DATA.experience.forEach((job, i) => {
          const el = document.createElement("div");
          el.className = `timeline-item reveal`;

          // Add responsive wrapper
          el.innerHTML = `
    <div class="timeline-content p-6 bg-white/5 rounded-xl shadow-md transition-all duration-500 ease-out">
      <h3 class="text-xl font-bold font-display">${job.role}</h3>
      <p class="text-accent font-semibold">${job.company}</p>
      <p class="text-secondary text-sm mt-1 mb-3 font-mono">${job.period}</p>
      <p class="text-secondary text-sm leading-relaxed">${job.description}</p>
    </div>`;

          experienceTimeline.appendChild(el);
        });

        // --- THE LIVING UNIVERSE PARTICLE SYSTEM ---
        const canvas = document.getElementById("particle-canvas");
        const ctx = canvas.getContext("2d");
        let particles = [];
        let mouse = { x: null, y: null, radius: 150 };
        let lastScrollY = window.scrollY;

        function setupCanvas() {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        }
        setupCanvas();
        window.addEventListener("resize", setupCanvas);

        window.addEventListener("mousemove", (e) => {
          mouse.x = e.clientX;
          mouse.y = e.clientY;
        });
        window.addEventListener("click", () => {
          const burstCount = 30; // more sparks
          for (let i = 0; i < burstCount; i++) {
            const angle = Math.random() * Math.PI * 2;
            const speed = Math.random() * 6 + 4; // faster sparks
            const colorVariants = [
              [255, 204, 102], // gold
              [0, 246, 255], // electric cyan
              [255, 99, 132], // neon pink
              [138, 43, 226], // violet
              [0, 255, 127], // spring green
              [255, 255, 102], // lemon yellow
              [0, 191, 255], // deep sky blue
              [255, 69, 0], // orange red
              [173, 216, 230], // light blue
              [186, 85, 211], // orchid
              [255, 105, 180], // hot pink
              [0, 255, 255], // aqua
              [124, 252, 0], // lawn green
              [70, 130, 180], // steel blue
              [199, 21, 133], // medium violet red
            ];

            const color =
              colorVariants[Math.floor(Math.random() * colorVariants.length)];

            particles.push(
              new Particle(
                mouse.x,
                mouse.y,
                Math.random() * 2 + 1,
                `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${
                  Math.random() * 0.4 + 0.6
                })`
              )
            );
          }
        });

        function applyMouseVortex(particle) {
          let dx = mouse.x - particle.x;
          let dy = mouse.y - particle.y;
          let distance = Math.sqrt(dx * dx + dy * dy);
          const isMobile = window.innerWidth < 640;
          if (distance < 200) {
            const angle = Math.atan2(dy, dx);
            const strength = (100 - distance) / 100;
            const vortexStrength = isMobile ? 0.15 : 0.5; // ðŸ”½ reduce on mobile
            particle.velocity.x +=
              Math.cos(angle + Math.PI / 2) * strength * vortexStrength;
            particle.velocity.y +=
              Math.sin(angle + Math.PI / 2) * strength * vortexStrength;
          }
        }

        function getParticleCountByScreen() {
          const width = window.innerWidth;
          if (width < 640) return 50; // Mobile
          else if (width < 1024) return 400; // Tablet / Laptop
          else return 600; // Large screens
        }

        class Particle {
          constructor(x, y, size, color, velocity, friction = 0.99) {
            this.x = x || Math.random() * canvas.width;
            this.y = y || Math.random() * canvas.height;
            this.size = size || Math.random() * 2 + 1;
            this.color =
              color || `rgba(100, 116, 139, ${Math.random() * 0.4 + 0.1})`;
            const isMobile = window.innerWidth < 640;
            this.velocity = velocity || {
              x: (Math.random() - 0.5) * (isMobile ? 0.03 : 0.1),
              y: (Math.random() - 0.5) * (isMobile ? 0.03 : 0.1),
            };
            this.alpha = 1;
            this.friction = friction;
          }
          draw() {
            ctx.globalAlpha = this.alpha * (0.5 + Math.random() * 0.5);
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.closePath();
            ctx.fill();
            ctx.globalAlpha = 1;
          }
          update() {
            let dx = mouse.x - this.x;
            let dy = mouse.y - this.y;
            let distance = Math.sqrt(dx * dx + dy * dy);
            if (distance < mouse.radius) {
              this.velocity.x -= dx * 0.0005;
              this.velocity.y -= dy * 0.0005;
            }

            this.velocity.x *= this.friction;
            this.velocity.y *= this.friction;

            this.x += this.velocity.x;
            this.y += this.velocity.y;
            if (this.friction !== 0.99) this.alpha -= 0.02;

            if (
              this.x < 0 ||
              this.x > canvas.width ||
              this.y < 0 ||
              this.y > canvas.height
            ) {
              if (this.friction === 0.99) {
                // respawn static particles
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
              } else {
                this.alpha = 0;
              }
            }
          }
        }

        function getParticleCountByScreen() {
          const width = window.innerWidth;
          if (width < 640) return 100; // Mobile
          else if (width < 1024) return 400; // Tablet/Laptop
          else return 600; // Desktop
        }

        function initParticles() {
          particles = [];
          const colorVariants = [
            [255, 204, 102], // gold
            [0, 246, 255],
            [0, 246, 255], // electric cyan
            [255, 99, 132], // neon pink
            [138, 43, 226], // violet
            [0, 255, 127], // spring green
            [255, 255, 102], // lemon yellow
            [0, 191, 255], // deep sky blue
            [255, 69, 0], // orange red
            [173, 216, 230], // light blue
            [186, 85, 211], // orchid
            [255, 105, 180], // hot pink
            [0, 255, 255], // aqua
            [124, 252, 0], // lawn green
            [70, 130, 180], // steel blue
            [199, 21, 133], // medium violet red,
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
            [0, 246, 255],
          ];
          const particleCount = getParticleCountByScreen();
          for (let i = 0; i < particleCount; i++) {
            const color =
              colorVariants[Math.floor(Math.random() * colorVariants.length)];
            particles.push(
              new Particle(
                Math.random() * canvas.width,
                Math.random() * canvas.height,
                Math.random() * 2 + 1,
                `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${
                  Math.random() * 0.4 + 0.6
                })`
              )
            );
          }
        }

        initParticles();

        const meteors = [];
        class Meteor {
          constructor() {
            this.reset();
          }
          reset() {
            this.x = Math.random() * canvas.width;
            this.y = -Math.random() * canvas.height;
            this.length = Math.random() * 20 + 10;
            this.speed = Math.random() * 2 + 2;
            this.alpha = Math.random() * 0.1 + 0.1;
          }
          update() {
            this.x += this.speed;
            this.y += this.speed * 0.6;
            if (this.y > canvas.height || this.x > canvas.width) this.reset();
          }
          draw() {
            ctx.save();
            ctx.globalAlpha = this.alpha;
            const hue = (Date.now() / 20 + this.x) % 360;
            ctx.strokeStyle = `hsl(${hue}, 100%, 70%)`;
            ctx.shadowColor = `hsl(${hue}, 100%, 70%)`;

            ctx.lineWidth = 2;
            ctx.shadowBlur = 15;
            ctx.shadowColor = "#00f6ff";
            ctx.beginPath();
            ctx.moveTo(this.x, this.y);
            ctx.lineTo(this.x - this.length * 0.8, this.y - this.length);
            ctx.stroke();
            ctx.restore();
          }
        }
        for (let i = 0; i < 20; i++) meteors.push(new Meteor());

        function animateParticles() {
          ctx.fillStyle = "rgba(1, 2, 4, 0.15)";
          ctx.fillRect(0, 0, canvas.width, canvas.height);

          particles = particles.filter((p) => p.alpha > 0);
          particles.forEach((p) => {
            applyMouseVortex(p);
            p.draw();
            p.update();
          });

          meteors.forEach((m) => {
            m.update();
            m.draw();
          });

          const maxParticles = getParticleCountByScreen();

          if (particles.length < maxParticles && Math.random() > 0.8) {
            particles.push(
              new Particle(
                null,
                null,
                null,
                `rgba(255, 204, 102, ${Math.random() * 0.4 + 0.6})`
              )
            );
          }

          requestAnimationFrame(animateParticles);
        }

        animateParticles();

        // --- INTERACTIVITY & SCROLL ---
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting)
                entry.target.classList.add("is-visible");
            });
          },
          { threshold: 0.1 }
        );
        document
          .querySelectorAll(".reveal, .timeline-item")
          .forEach((el) => observer.observe(el));

        const navbar = document.getElementById("navbar");
        const timelineProgress = document.querySelector(
          ".timeline-line-progress"
        );
        window.addEventListener("scroll", () => {
          navbar.classList.toggle("scrolled", window.scrollY > 50);

          const timelineEl = document.querySelector(".timeline");
          if (timelineEl) {
            const rect = timelineEl.getBoundingClientRect();
            const progress = Math.max(
              0,
              Math.min(1, -rect.top / (rect.height - window.innerHeight))
            );
            timelineProgress.style.height = `${progress * 100}%`;
          }

          const scrollDelta = window.scrollY - lastScrollY;
          particles.forEach((p) => {
            p.y -= scrollDelta * 0.3;
          });
          lastScrollY = window.scrollY;
        });

        const cursorWisp = document.getElementById("cursor-wisp");
        let wispX = 0,
          wispY = 0;
        function animateCursor() {
          wispX += (mouse.x - wispX) * 0.2;
          wispY += (mouse.y - wispY) * 0.2;
          cursorWisp.style.transform = `translate(${wispX - 10}px, ${
            wispY - 10
          }px)`;
          requestAnimationFrame(animateCursor);
        }
        animateCursor();

        // --- AUDIO EASTER EGG ---
        const synth = new Tone.Synth().toDestination();
        document.querySelectorAll("[data-magnetic]").forEach((el) => {
          el.addEventListener("mouseenter", () =>
            Tone.start().then(() => synth.triggerAttack("C2", Tone.now(), 0.1))
          );
          el.addEventListener("mouseleave", () =>
            synth.triggerRelease(Tone.now() + 0.1)
          );
        });
      });

      // Mouse Parallax
      document.addEventListener("mousemove", (e) => {
        const centerX = window.innerWidth / 2;
        const centerY = window.innerHeight / 2;
        const moveX = (e.clientX - centerX) / centerX;
        const moveY = (e.clientY - centerY) / centerY;

        document.querySelectorAll("[data-depth]").forEach((el) => {
          const depth = parseFloat(el.getAttribute("data-depth"));
          const x = moveX * depth * 30;
          const y = moveY * depth * 30;

          el.style.setProperty(
            "transform",
            `translate3d(${x}px, ${y}px, 0) ` + el.dataset.originalTransform ||
              ""
          );
        });
      });

      document
        .getElementById("contact-form")
        .addEventListener("submit", (e) => {
          e.preventDefault();
          alert("Message sent! [Note: backend not connected yet]");
        });
      const menuToggle = document.getElementById("menu-toggle");
      const mobileMenu = document.getElementById("mobile-menu");
      const menuClose = document.getElementById("menu-close");

      menuToggle.addEventListener("click", () => {
        mobileMenu.classList.remove("translate-x-full");
        mobileMenu.classList.add("translate-x-0");
      });

      menuClose.addEventListener("click", () => {
        mobileMenu.classList.add("translate-x-full");
        mobileMenu.classList.remove("translate-x-0");
      });
      // Close menu on link click
      document.querySelectorAll("#mobile-menu a").forEach((link) => {
        link.addEventListener("click", () => {
          mobileMenu.classList.add("translate-x-full");
          mobileMenu.classList.remove("translate-x-0");
        });
      });
    </script>
  </body>
</html>
